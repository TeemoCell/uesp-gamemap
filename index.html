<!DOCTYPE html>
<html>
	<head>
		<!-- Metadata -->
		<title>UESP Gamemap</title>
		<link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
		<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0">
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

		<!-- CSS -->
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.1/dist/leaflet.css" integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14=" crossorigin="" />
		<link rel="stylesheet" href="./css/materialise.css" media="screen,projection"/>
		<link rel="stylesheet" href="./css/gamemap.css"/>

   </head>

   <body>

		<!-- Gamemap -->
		<div id="gamemap"></div>

		<div class="icon_bar">
			<div class="icon_bar_persistent">
				<!-- Persistent icon bar actions (overflow menu) -->
				<button id="btn_more" class='btn_icon_button waves-effect dropdown-trigger' title="More" data-target='overflow-menu'>
					<i class="material-icons">more_vert</i>

					<!-- Overflow Menu Items -->
					<ul id='overflow-menu' class='dropdown-content'>
						<li><a onclick="showHelp()" href="javascript:void(0);">Help</a></li>
						<li><a onclick="resetMap()" href="javascript:void(0);">Reset Map</a></li>
						<li><a onclick="toggleFullscreen();" href="javascript:void(0);" id="fullscreen-toggle"><i class="material-icons small">fullscreen</i>Fullscreen</a></li>
					</ul>
				</button>
			</div>

			<!-- Uncommon actions (Just icon buttons) -->
			<div id="btn_toggle_edit" class='btn_icon_button_toggle waves-effect banishdefault nomobile' title="Toggle the edit menu">
				<i class="material-icons">edit</i>
				<input type="checkbox" onchange="toggleEdit(this.checked)"> <!-- todo: merge RC into edit menu-->
			</div>

			<div class="icon_bar_responsive">

				<!-- Common actions (Icon buttons with label) -->
				<button id="btn_location_switcher" class='btn_icon_button waves-effect banishdefault' title="Jump to location" onclick="toggleLocationSwitcher();">
					<i class="material-icons onlymobile">explore</i>
					<b class="icon_btn_label nomobile" id="current_location_label">Loading...</b>
					<i id="dropdown_icon" class="material-icons nomobile">expand_more</i>
				</button>

				<button id="btn_goto_article" class='btn_icon_button waves-effect banishdefault' title="Goto article for this location" onclick="gotoArticle()">
					<i class="material-icons">article</i>
					<b class="icon_btn_label nomobile">Goto Article</b>
				</button>

				<button id="btn_permalink" class='btn_icon_button waves-effect' title="Copy link to this location" onclick="copyMapLink()">
					<i class="material-icons">link</i><b class="icon_btn_label nomobile">Copy Link</b>
				</button>

			</div>
		</div>


		<!-- Layer switcher Widget -->
		<div class="layer_widget_root">

			<!-- Primary layer switcher button -->
			<button id="btn_layer_widget_switcher" has-background-image="true">
				Layers
				<i class="small material-icons" style="position: relative; bottom: 45px;">layers</i>
				<p id="layer-name" class="layer-name" style="bottom: 12px;">Gridmap</p>
			</button>

			<!-- Additional layer options (on hover) -->
			<div class="layer_widget_options">

				<div id="btn_toggle_grid waves-effect" class='btn_layer_toggle layer-button' title="Toggle cell grid">
					<i class="material-icons">grid_on</i>
					<p class="layer-name">Cell Grid</p>
					<input type="checkbox" onchange="toggleCellGrid(this.checked)">
				</div>

				<div id="btn_toggle_resource_grid waves-effect" class='btn_layer_toggle layer-button' title="Toggle resource grid">
					<i class="material-icons">local_florist</i>
					<p class="layer-name">Resources</p>
					<input type="checkbox" onchange="toggleCellResources(this.checked)">
				</div>



<!--
				<div id="btn_toggle_grid" class='btn_icon_button_toggle waves-effect banishdefault' title="Toggle the cell grid">
					<i class="material-icons">grid_on</i>
					<input type="checkbox" onchange="toggleCellGrid(this.checked)">
				</div> -->


			</div>
		</div>


		<!-- Search -->
		<div class ='search_root' id="search_root">

			<div class='search_container' id="search_container">

				<!-- Search bar -->
				<div id='searchbar' tabindex="0">
					<div class="search_icon">
						<i class="material-icons">search</i>
					</div>

					<div class='searchbox_container'>
						<input class='search_box' type='search' id='searchbox' placeholder="Where would you like to go?" size='25' maxlength='100' autocomplete='off' onfocus="focusSearch()" />
					</div>

					<button id="btn_clear_search" class='btn_bgless_icon_button banishdefault waves-effect waves-circle' title="Clear the current search" type='reset'><i class="material-icons">close</i></button>
				</div>

				<!-- Search Results -->
				<div id='search_results_container' class="banishdefault">

					<div id="search_progress_bar" class="progress_bar banishdefault">
						<div class="progress"><div class="indeterminate"></div></div>
					</div>

					<div id="search_options_container">
						<b style="font-size: 1.0rem;">Search options</b><br>
						<label class="waves-effect" style="width: 100%; padding-top: 8px;">
							<input id="search_current_map_checkbox" type="checkbox" class="filled-in" onchange="updateSearch($('#searchbox').val(), this.checked);" />
							<span>Only show results from this map</span>
						</label>
						<hr id="search_divider" class="banishdefault">
					</div>
					<div id="search_results" class='search_results'>
						<!-- search results go here-->
					</div>
				</div>
			</div>
		</div>

		<!-- Zoom widget -->
		<div id="zoom_widget" class="hidedefault">
			<button class="btn_zoom waves-effect" onclick="zoomIn()" id="btn_zoom_in" tabindex="-1" title="Zoom in"><i class="material-icons">add</i></button>
			<div class="horizontal_divider"></div>
			<button class="btn_zoom waves-effect" onclick="zoomOut()" id="btn_zoom_out" tabindex="-1" title="Zoom out"><i class="material-icons">remove</i></button>
		</div>

		<!-- Errorbox -->
		<div id="error_box" class="error_container hidedefault preload_box">
			<span class="error_title">
				<i class="medium material-icons">error</i><br/>
				<b>Something went wrong.</b>
			</span>
			<div class="horizontal_divider"></div>
			<p id="error_box_reason">A reason should be put here.</p>
		</div>

		<!-- Loading spinner -->
		<div id="loading_spinner" class="spinner_container preload_box">
			<div class="preloader-wrapper big active">
				<div class="spinner-layer">
					<div class="circle-clipper left">
						<div class="circle"></div>
					</div><div class="gap-patch">
						<div class="circle"></div>
					</div><div class="circle-clipper right">
						<div class="circle"></div>
					</div>
				</div>
			</div>

			<p id="loading_reason">Loading config...</p>
		</div>

		<div id="map_loading_bar" class="progress_bar">
			<div class="progress"><div class="indeterminate"></div></div>
		</div>

		<!-- Location switcher -->
		<div id="location_switcher_root">

			<ul id="location_switcher_tab_bar" class="tabs">
				<li id="group_tab" class="tab"><a href="#tab_categories">Groups</a></li>
				<li id="abc_tab" class="tab"><a href="#tab_alphabetical">ABC</a></li>
			</ul>

			<div id="location_switcher_content">

				<div id="tab_categories" class="tab-pane">
					<!-- grouped locations go here -->
				</div>

				<div id="tab_alphabetical" class="tab-pane">
					<!-- alphabetical locations goes here -->
				</div>
			</div>
		</div>

		<!-- Javascript -->
		<script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
		<script src="https://unpkg.com/leaflet@1.9.1/dist/leaflet.js" integrity="sha256-NDI0K41gVbWqfkkaHj15IzU7PtMoelkzyKp8TOaFQ3s=" crossorigin=""></script>
		<script src="./src/lib/materialise.js"></script>
		<script src="./src/lib/edgebuffer.js"></script>
		<script src="./src/lib/smoothwheelzoom.js"></script>
		<script src="./src/lib/tilelayercanvas.js"></script>
		<script src="./src/lib/canvasoverlay.js"></script>
		<script src="./src/lib/canvaslayer.js"></script>
		<script src="./src/main.js" type="module"></script>
	</body>
</html>
